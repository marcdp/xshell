<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./favicon.ico">

    <!--
    <link rel="preload" href="/src/modules/x/components/x-anchor.js"  as="script"/>
    <link rel="preload" href="/src/modules/x/components/x-button.js"  as="script"/>
    <link rel="preload" href="/src/modules/x/components/x-loading.js"  as="script"/>
    <link rel="preload" href="/src/modules/x/layouts/x-layout-dialog.js"  as="script"/>
    <link rel="preload" href="/src/modules/x/ui/x-element.js"  as="script"/>
    <link rel="preload" href="/src/modules/x/ui/page-instance-sfc.js"  as="script"/>
    -->

    <script type="importmap">
        {
          "imports": {
            "shell": "/src/shell.js"
          }
        }
    </script>
    <script type="module">
        //import
        import shell from "shell";
        //init
        await shell.init({
            // app
            "app.name": "Sample2",
            "app.label": "Sample2 title",
            "app.version": "0.1",
            "app.copyright": "",
            "app.logo": "./logo.svg",
            // shell
            "shell.base": ".",
            "shell.debug": true,
            "shell.start": "/module1/pages/page4.html",
            // module oidc
            "modules.oidc.src": "/src/modules/oidc/module.js",
            // module x
            "modules.x.src": "/src/modules/x/module.js",
            "modules.x.path": "/x",
            // module x-man
            "modules.x-man.src": "/src/modules/x-man/module.js",
            "modules.x-man.path": "/x-man",
            // module 1
            "modules.module1.src": "./module1/module.js",
            "modules.module1.path": "/module1",
            // module 2
            "modules.module2.src": "./module2/module.js",
            "modules.module2.path": "/module2",
            "modules.module2.loading": "lazy",
        });
        //start
        await shell.start();
    </script>
</head>
<body>
</body>
</html>


<!--
x - error
x - go back -- should close any opened dialog at end
x - stack -- backdrop
x - stack -- title + close
x- dialog -- title + close
x - breadcrumb
x - load pages from path like /x/pages/....
x - path -- move to src
x- app.getRealUrl -- page.getHref("page1.html", settings)
x- mpashell -- xshell
x - loader.page-handler:... -- remove
x - loader.class:converter-page-handler-html...
x - loader.class:converter-page-handler-x... 
x - pensar manera que es puguin carregar diferents handlers de cada modul
x - handler -- factory? 
x - store instance of instance at x-page level
x - handler sfc
x - pensar sistema de tenir multiples handlers (i que cada modul pugi especificar el handle a utilitzar (html, sfc, etc))
x - menus pensar manera de tenir N menus, i que cada modul posi les seves coses al menu general o be al seu propi menu
x - no fer this.page.addEventListener ...
x - load page that has error : we must show the errors to the user
x - page -> poder afegir l'estat en una capsalera meta
x - menu esquerra
x - show all errors when loading page3
x - select menuitem in x-drawer-menu
x - layouts -- prefix with x-layout-...
x - x-layout-main -- show logo
x - x-layout-* ... pensar si cal utilitzar el shadowDOM
x - x-drawer-menu -- main title/label
x - set default label based on title of the menuitem
x - estils basics layouts (main, stack, embed, dialog, default)
x - aws console styles
x - mobile: click on menuitem should close the menu
x - page.load(): breadcrumb: get module from breadcrumb first url
x - podria ser una pagina d'un modul visualitzada desde el menú d'un modul original (cal mostrar el menu del modul original)
x - link with ?breadcrumb=xxxxxx   should work, and show the breadcrumb
x - stack animation
x - menuitem -- allow embed page
x - responsive
x - components
x - x-search
x - x-layout-main -- page max width + centered
x - x-lazy
x - x-shell-search  -- > opens a x-search-page
x - embed page
x - x-dropdown -- 
x - do not use commands like state-changed
x - on module load: send an event to the bus like 'module-loaded' with the module name
x - bus: use window.... methods to throw events -- Not at the moment
x - browse modules: each module should have a default page
x - the modules.html page should list all loaded modules with a link to the start page of each module
x - the modules.html should be showed in a dropdown manner at the top of the page (or as stack page at left)
x - each module should have a list of main menuitems
x - allow config "shell.debug"
x - each module should have an logo
x - x-loading -- cicle
x - loader: should be able to load resources from a url (ex: icon:https://......icon.svg, icon:./icon.svg, icon:icon.svg, ...icon: /x/icons/my-icon.svg)
x - x-listview
x - x-listview big icons
x - modules: show grid of icons with the logo of each module
x- x-dropdown auto closess!!! why??? -- review utils.isDescendantOfContainer -- it is not working properly, should enter in all shadowRoots
x - modules.module1.type = "application" | "theme" | "..."
x - show page at bottom right corner + icon to minimize or expand, call it "#tray"
x - x-popover -- foucs out -- hide
x - page: activate/deactivate on dropdown pages
x - page: activate/deactivate ?? val la pena??? NO
x - module: activate/deactivate ??? NO
x - wizard styles like: https://eu-west-1.console.aws.amazon.com/console/applications/create-application?nc2=h_ct&region=eu-west-1&src=header-signin
x - tabs -- increment font size
x - top right icon should expand a page floating at the left direction
x - x-form + x-datafields + x-pager + x-richtext + x-code-editor
x - button disabled
x- details (title + body expandable)
x - x-datafield focus
x- fieldset 
x - x-datafield with langs
x - menu drop down
x - menu drop down de segon nivell
x - create module with documentation pages: for x-buttons, for x-icons, x-cards, x-anchor, pages , etc layouts
x- in debug mode, we should show the "/x/pages/debug" as dropdown ???? This page should have:
x - loader: allow define nont cacheable???
x - sfc: use <template> tag in the definition of a page
x - loader -- page:/x/pages/debug.html
x - sfc style -- global
x - mobile drawer menu -- should scroll vertically
x - observedAttributes: fer que no sigui obligatori especificarlos. Per defecte, tots els state.props de tipus simple (bool, int, float, string, date) poden venir dels attributs
x - permetre cachejar les pages: --. implicar no utilitzar transform:"response" en el fetch del loader
x - menuitems separador + expandable
x - refs -- NO
x - x-dropdown remove double click
x - x-button - remove document click
x - favicon
x - dropdown page padding
x - nested embedde pages padding
x - x-template -- remove shortcuts for setting attributes, properties and events --- NO
x - showWorking
x - refs
x - x-json
x - loader: should throw exception if error
x - shell.loadModule -- use reject if error loading
x - x-search
x - search: show modules of the search results
x - x-desktop
x - x-mobile
x - search page: module listens for "search" command, and returns an async task with the results NO
x - show page md -- show in light dom
x - x-markdown -- auto load components
x - playground page -- fill all space!!!
x - search page: load all modules and perform an async "search" command in all of them NO
x - x-playground - auto refresh
x - x-html with colors
x - show error loading unexisting web component
x - x-datetime
x - page.js -- page.srcAbsolute
x - import {bus} from "./../../shell.js";
x - load page of unexisting module should show an error message
x - error.html ? add "page" argument, add "module" argument
x - load page of unexisting module should hide the breadcrumb, and left menu
x - remove all uses of navigation-end.module
x - remove all uses of page.module use the page.src or page.srcPage to obtain the module
x - set loader config from outside
x - loader-handler: fetch, import, ..
x - eliminar loader.transforms -- fer ho tot amb els loader-handlers (ex: loader-handler=svg)
x - loader-handler page-markdown -- ha de crear un html, amb <x-markdown src="..."></x-markdown>
x - loader-handler page-pdf
x - page.replace(src)
x - tabs hash
x - page.hash hierarchycal NO
x - if menu has single page, then we should hide the menu??? NO
x - each module can show custom menu tools -- use @scope to style right menu items
x - when stack is showed, add  overflow:hidden to body
x - /x/pages/debug-modules.html -- modules loaded -- listview with columns: status, path, description, icon, etc
x - /x/pages/debug-modules.html: auto refresh, when module loaded
x - /x/pages/debug-config.html -- config -- show config as table key value
x - shell.dispatchEvent("navigation-start")
x - shell.dispatchEvent("navigation-end")
x - shell.dispatchEvent("search", {})
x - /x/pages/debug-loader.html -- pages loaded -- show listsview
x - x-treeview -- use counter to mark even/odd rows
x - /x/pages/debug-pages.html -- pages loaded -- show listsview
x - x-treeview - with of columns
x - x-treeview - pensar algun databind recursiu
x - x-treeview: pensar databind per les columnes
x - pages: error pages: status= error
x - pages: load time
x - modules: load time
x - remove shell started-at
x - pages: size
x - debug-pages -- show stats.size
x - shell: load time
x - loader.load("", stats)
x - /x/pages/debug-pages --- show load errors in red
x - /x/pages/debug-pages --- show odd/even rows in different colors
x - x-file-size -- to format file sizes
x - x-time-ms -- to format time in ms
x - /x/pages/debug-loader --- show load errors in red
x - x-recursive -- node container ??
x - x-attr:class="{xxx:xx, b:bbbb}" -- should add class xxxxxxxx if value true
x - x-class:xxxxxxxx="state.enabled" -- should add class xxxxxxxx if value true
x - x-menu selected
x - x-menu with ul



- do not use config["modules.x.status"] = "loaded" !!!! config should be readonly !!! is not state!!!!

- /x/pages/debug-modules --- use x-treeview
- /x/pages/debug-loader --- use x-treeview

- pages: click -- navigate to page

- think what to do with with x-listview in details mode (use x-treeview? or use the same technique as x-treeview)


- menu -- render recursive

- docs

- x-splitter

- use Auth0 + OpenID Connect (OIDC)
  - navigation
  - auto load modules and web components
  - authentication
  - user menu

  

- datafield file 
- datafield files
- datafield image
- datafield images

- input select un registre d'una taula sortable i varies columnes (ex: https://eu-west-3.console.aws.amazon.com/dynamodbv2/home?region=eu-west-3#dax-cluster-create) d'un datatable?

- treeview

- npm package


- top menu (like for example in aws console, wher all modules are showed)
  - idea 3:
    - each module: "merge:shell.menus.main" = ...  --- loader automatically adds the menuitems (or whatever) to the top menu (to the shell config)
    - each module: modules.xxx.shell.menus.main = ...  --- loader automatically adds the menuitems (or whatever) to the top menu (to the shell config)

- module data ??? think about that

- i18n: pensar sistema de que cada modul tingui les seves propies traduccions i utilitzi la seva propia taula de traduccions


-->