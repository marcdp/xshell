<!DOCTYPE html>
<html lang="en">
<head>

    <!-- head -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <!-- import map -->
    <script type="importmap">
        {
            "imports": {
              "x-shell": "/src/x-shell.js"
            }
        }
    </script>

    <!-- xshell -->
    <script type="module">
        import xshell from "/src/x-shell.js";
        import XTemplate from "/src/x-template.js"

        // test
        var state = {
            var1: 1,
            var2: 2,
            var3: {
                str1: "hello",
                str2: "bye"
            },
            var4: [
                {name:"aaaaa"},
                {name:"bbbbbbbb"},
                {name:"cccc"}
            ]
        }
        var div = document.createElement("DIV");
        document.body.appendChild(div);
        var xTemplate = XTemplate.compileTemplate(`
            <div>hello <b>world</b>: {{ state.var1 }}</div>
            <x-icon></x-icon>{{ state.var2 }}
            <button x-on:click="onClick">mybut</button>
            {{ state.var3.str1 }},
            <ul>
                <li x-for="item in state.var4" x-key="name">
                    {{ item.name }}
                </li>
            </ul>
        `);
        var handler = {
            onClick: (event) => {
                debugger;
            }
        }
        XTemplate.render(state, xTemplate, div, handler);

        // init
        await xshell.start({
            //app info
            app: {
                name:       "sample1",
                title:      "Sample 1",
                version:    "1.0",
                copyright:  "",
                logo:       "logo.svg"
            },
            //browser config
            browser: { 
                styleSheets: [] //array of styleSheets urls to load
            },
            //bus config
            bus: { 
                debug: true
            },
            //i18n config
            i18n: { 
                culture: "en",
                strings: {
                    "hello world": "hola mundo",
                    "bye": "adios"
                }
            },
            //list of url patterns to load components, icons, and images: "component:prefix": "/path/to/component{name.js}"
            loader: {
                map: {
                    //"component:fluent": "https://unpkg.com/@fluentui/web-components",
                    //"component:vaadin": "https://cdn.jsdelivr.net/npm/@vaadin/{name-unprefixed}@23.5.6/+esm",
                    //"component:md": "@material/web/all.js",
                    //"component:sl": "https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.17.1/cdn/shoelace.js",
                    "icon:material": "https://material-icons.github.io/material-icons/svg/{name-unprefixed}/outline.svg"
                }                
            }, 
            //logger setup
            logger: { 
                debug: true
            },
            //menus to use
            menus: {  
                main: [
                    {label: "File", icon: "x-file1"},
                    {label: "Edit", enabled: false},
                    {label: "Tools", childs:[
                        {label: "Option 1"},
                        {label: "Option 2"},
                        {label: "Option 3", hidden: true},
                    ]},
                ],
                footer: [
                    {label: "About"},
                    {label: "Copyright"},
                ]
            },
            //list of modules to load
            modules: [ 
                {module:"/src/modules/x/module.js", args:{a:1, b:2}}
            ],
            //navigator configuration
            navigator: { 
                base:  "/samples/sample1",                
                start: "/folder1/login.html",
                titlePrefix: "",
                titleSuffix: " (XShell)"
            },
            //ui
            ui: {
                errors: {
                    default:""
                },
                layouts: {
                    app: {
                        main: "",
                    },
                    page: {
                        main:  "",
                        stack: "",
                        dialog:"",
                        default: ""
                    }
                },
                styleSheets: [], //array of styleSheets urls to load
            },
            // user
            user: {  
                id: "",
                username: "",
                authenticated: false,
                claims: {}
            },
            //server info
            server: {}, 
        });
     </script>

</head>
<body>
    
    
</body> 
</html>

<!--

x - auto add styles.css to x-shell
x - x-icon
x- loader: avoid parallel loader of the same resource
x - auto create importmap for x-shell ?? NO
x - x-breadcrumb
x - we can override the layout used, using a query parameter (ex: ...my-page.html?x-page-layout=xxxxxx)
x - x-page
x - load custom page
x - show detailed errors
x - show error page
x - embed page
x - x-page close
x - x-page back
x - posar x-breacrumb a x-layout-default, i fer que funcioni
x - pass breadcrumb encoded in query string
x - global layout (like layouts but for the x-shell wrapper), in order to avoid repaint flicks
x - x-navigator
x - autoload layouts at ui.start()
x- layout default -> rename to main
x- layout default -> use that as the embed + remove embed
x - side panel with deafult layout
x - css with defaults styles
x - beautifulize layouts
x - allow navigate using anchors inside an embedeed page
x- loading

- create user at npmjs
- create npm package + publish: npm publish
- add package to npm

- responsive design
- store user settings locally
- rpc
- routes alias (/about -- > /pages/folder/about.html)


- var renderer = XUI.create(state, template, handler, HTMLElement);
- x-element
- menus
- show avatar + drop down avatar menu

x - x-i18n

- page: handlers ?? !! no --  > needs an script that returns a class, and thats all
- showPage animations/transition

x - integrar Fluent UI Web Components
- integrar vaadin
x - integrar material components: https://github.com/material-components/material-web/blob/main/docs/quick-start.md
x- integrar shoelace
- integrar ionic (https://ionicframework.com/docs/intro/cdn)
- integrar ui5 components: https://sap.github.io/ui5-webcomponents/components/Button/
- loader: []
    "component:sl": [
        {tag:"link", rel:"stylesheet", href:"https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.17.1/cdn/themes/light.css"},
        {tag:"script", type:"module", src:"https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.17.1/cdn/shoelace.js"}
    ]
  }
x - lit-element

-->